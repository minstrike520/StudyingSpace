# 排列公式
## 加法原理
- 加法原理： $n(A\cap B) = 0 \to n(A\cup B) = n(A) + n(B)$
	- 若兩事件互斥，則兩事件的聯集大小等於其分別的集合大小之**和**。
## 乘法原理
- 乘法原理： $A 與 B 為獨立事件 \to n(A\cap B) = n(A)n(B)$
	- 若兩事件獨立，則兩事件的交集大小等於其分別的集合大小之**積**。
## 直線排列
- 資料形態：tuple (有序)
- n 物任意排列 $\to$ 可能性 $= n!$
- n 物中取 r 個任意排列 $\to$ 可能性 $P^n_r = \frac{n!}{(n-r)!}$
## 不盡相異物排列
*又名 同物排列*
$$A = \set{a,a,b,b,b,c,d,e} \to n(A隨機排列) = \frac{8!}{2!\ 3!}$$
## 重複排列
- n 物取 m 個任意排列且**同一物的選取次數沒有限制** $\to$ 可能性 $= n^m$
	- 每物可能的選取次數
		1. 一次
		2. 很多次
		3. 零次 (沒選到)
	- 【情境分析】另一種描述方法：n **種**物品排入長度為 m 的排列
		1. 每一個「位」都有 n 種可能的「物」，因此每一個位的可能性為 n
		2. 每物在列表中的出現次數不限，代表每個位的可能性**互相獨立**
		3. 運用[[#乘法原理]]，可以得出此排列的總可能性為「分別的集合大小之積」，即 $n \times n \times n \times... = n^m$
	- $(n,\ m) \sim{(\text{options},\ \text{length})}$
# 組合公式
## 組合
- 資料形態：set (無序)
- n 物任意選取 r 個 $\to$ 可能性 $C^n_r = \frac{n!}{r!(n-r)!}$
- $C^n_r = C^n_{n-r}$
## 巴斯卡定理
- $C^n_r = C^{n-1}_r + C^{n-1}_{r-1}$
- 【經典】$C^a_b + C^a_{b+1} + C^{a+1}_{b+2} + ... + C^n_r = C^{n+1}_r$
	- 抽象：$n - a = r - (b+1)$
	- 原理：(第一步) $C^a_b + C^a_{b+1} = C^{a+1}_{b+1}$
## 排容原理
- 兩集合的排容原理： $n(A\cup B) = n(A) + n(B) - n(A\cap B)$
- 三集合的排容原理： $n(A\cup B\cup C) = n(A) + n(B) + n(C) - [n(A\cap B) + n(B\cap C) + n(C\cap A)] + n(A\cap B\cap C)$

## 錯排
reference: [wikipedia](https://zh.m.wikipedia.org/zh-tw/%E9%94%99%E6%8E%92%E9%97%AE%E9%A2%98)
- n 物來自一個原排列，今將物品移到**與原來不同的位置**，稱為錯排。
### k物錯排
- 【變數設定】 $\text{let} \ k \in \mathbb N,\ k \le n$
- k 物錯排 $\to$ 可能性 $= n! - C^k_1(n-1)! + C^k_2(n-2)! - C^k_3(n-3)! + ... + (-1)^k C^k_k(n-k)!$
	- 原理：用扣減的方法，可能性 = $(任意排列) - (X_1在原位 \cup X_2在原位 \cup ... \cup X_k在原位)$
		1. $\sum^k_{i = 1} n(X_i在原位) = C^k_1(n-1)!$ ：k 物中任選一物留在原位，其他物任意排列
		2. $C^k_1(n-k)!$ ：k 物中所有物都留在原地，其他物任意排列
		3. 每一項可分解 (以第二項為例)：$C^k_2 (n-2)! = \frac{k!}{2!\cancel{(k-2)!}} \cdot \cancel{(k-2)!} = k! \cdot \frac 1 {2!}$
### 全錯排
- 全部錯排 $\to$ 可能性 $D_n = n!\left(\frac 1 {2!} - \frac 1 {3!} + \frac 1 {4!} + ... + (-1)^n \frac 1 {n!}\right)$
	- 即[[#k物錯排]]的特化版， $k = n$
	- 可能性加總的最後一項變成 $(-1)^n C^n_n \cdot 0!$